<?php

use yii\helpers\Html;
use yii\bootstrap\ActiveForm;
use yii\widgets\Pjax;
use yii\widgets\Menu;
use yii\bootstrap\Nav;
use yii\bootstrap\NavBar;
use kartik\nav\NavX;

/* @var $this yii\web\View */

$this->title = 'My Yii Application';
?>
<div class="site-index">

    <div class="jumbotron">

        <p class="lead">Authorization by predator_pc@10/04/2016</p>

    </div>

    <div class="body-content">

             <?php
			

if (Yii::$app->user->can('createOrder')) {

	echo "<h1>Now you can create an order!</h1>";
}
if (Yii::$app->user->can('GodMode'))
{
	echo "<h1>Now it seems you're admin!</h1>";
}
			//	if(!Yii::$app->user->isGuest)
			//		var_dump($_SESSION);

//var_dump($list); die();


//var_dump($list);die();
//		case 3: { $menu_level3['items'][] = ['label' => $list[$i]['item'], 'url'=>'/']; }// echo "&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href='/catalog/".$list[$i]['url']."/".$list[$i]['id']."'>".$list[$i]['item']."</a><br>";break;


/*
echo NavX::widget([
    'options'=>['class'=>'nav nav-pills'],
    'items' => [
        ['label' => 'Action', 'url' => '#'],
        ['label' => 'Submenu 2', 'active'=>true, 'items' => 
				[
    	        	['label' => 'Action', 'url' => '#'],
		            ['label' => 'Another action', 'url' => '#'],
	    	        ['label' => 'Something else here', 'url' => '#'],
	        	    '<li class="divider"></li>',

		['label' => 'Submenu 2', 'items' => 
				[
	                ['label' => 'Action', 'url' => '#'],
	                ['label' => 'Another action', 'url' => '#'],
	                ['label' => 'Something else here', 'url' => '#'],
	                '<li class="divider"></li>',
            	    ['label' => 'Separated link', 'url' => '#'],
        	    ]],
    	]],
        ['label' => 'Something else here', 'url' => '#'],
        '<li class="divider"></li>',
        ['label' => 'Separated link', 'url' => '#'],
    ]
]);   */
 




//$menu['items'] = array();
$menu = array();
$menu2 = array();
$menu3 = array();

$current_level1=0;
$current_level2=0;
$current_level3=0;



for($i=0; $i<count($list); $i++)
{
	switch ($list[$i]['level'])
	{
		case 1: { 
//					var_dump($menu['items']);die();
						$current_level1=$list[$i]['id'];//$list[$i]['id']; 
//						$menu['items'][$list[$i]['id']] = 
//						['label' => $list[$i]['item'], 'url'=>'/', 'items' => $menu2['items'][$current_level1]]; 
//						var_dump($menu['items'][$current_level1]); 
				} //echo "<a href='/catalog/".$list[$i]['url']."/'>".$list[$i]['item']."</a><br>";break;
		case 2: { 
						$current_level2=$list[$i]['id'];//$list[$i]['id']; 
						$menu2['items'][$list[$i]['id']] = ['label' => $list[$i]['item'], 'url'=>'/', 'items' => function(){ return ['label'=>'123']; }]; 

				} //echo "&nbsp&nbsp&nbsp&nbsp<a href='/catalog/".$list[$i]['url']."/".$list[$i]['id']."'>".$list[$i]['item']."</a><br>";break;

		case 3: { 
						$current_level3=$list[$i]['id'];//$list[$i]['id']; 
						$menu3['items'][$list[$i]['id']] = ['label' => $list[$i]['item'], 'url'=>'/', 'url'=>'/', ['items' => $menu2['items'][$current_level2]]]; 
						
//						echo $current_level3;
				}
	}
}

var_dump($menu3);//die();

echo NavX::widget($menu2);

//echo Nav::widget($menu, ['options' => ['class' => 'sidebar-menu treeview']]);

var_dump($menu2);die();
 
/*
//3 level

	$iz=array();
	$iz['items'][800] = [ 'label' => 'Fuckoff3', 'url' => '/'];
	$iz['items'][700] = [ 'label' => 'Fuckoff3', 'url' => '/'];
	$iz['items'][600] = [ 'label' => 'Fuckoff3', 'url' => '/'];
	$iz['items'][500] = [ 'label' => 'Fuckoff3', 'url' => '/'];

	$ix=array();
	$ix['items'][400] = [ 'label' => 'Fuckoff3', 'url' => '/'];
	$ix['items'][300] = [ 'label' => 'Fuckoff3', 'url' => '/'];
	$ix['items'][200] = [ 'label' => 'Fuckoff3', 'url' => '/'];
	$ix['items'][100] = [ 'label' => 'Fuckoff3', 'url' => '/'];

//2 level
	$iw=array();
	$iw['items'][40] = [ 'label' => 'Fuckoff2', 'url' => '/', 'items' => $iz['items']];
	$iw['items'][30] = [ 'label' => 'Fuckoff2', 'url' => '/', 'items' => $ix['items']];

	$is=array();
	$is['items'][20] = [ 'label' => 'Fuckoff1', 'url' => '/', 'items' => $ix['items']];
	$is['items'][10] = [ 'label' => 'Fuckoff1', 'url' => '/', 'items' => $iz['items']];

//1 level

	$it=array();
	$it['items'][] = [ 'label' => 'FuckoffA', 'url' => '/', 'items' => $iw['items']];
	$it['items'][] = [ 'label' => 'FuckoffB', 'url' => '/', 'items' => $iw['items']];
	$it['items'][] = [ 'label' => 'FuckoffC', 'url' => '/', 'items' => $is['items']];
	$it['items'][] = [ 'label' => 'FuckoffD', 'url' => '/', 'items' => $is['items']];
//	$it['options'][] = ['id' => 'down_menu'];
//top

	$items = array();
	$items['items'] = $it['items'];
	$items['options'][] = ['options' => ['id' => 'topnav','class' => 'navbar-default center-block text-center']]; 

var_dump($items); //die();

echo NavX::widget([
    'options'=>['class'=>'nav nav-pills'],
	$items
		]);

//	$items['items'][] = ['label'=>'All', 'url'=>['/shop/products/index']];

/*echo Menu::widget($items, ['options' => [
                            'class' => 'nav navbar-nav width-sto'
                        ],
                        'activateParents'=>true,
                        'activeCssClass'=>'active',]);    */

//echo Nav::widget($items, ['options' => ['class' => 'sidebar-menu treeview']]);
         
/*NavBar::begin([
    'brandLabel' => 'Yii Navbar',
    'brandUrl' => Yii::$app->homeUrl,
    'options' => [
        'class' => 'navbar-default'
    ]
]);



NavBar::end();
                   */
			?>

    </div>
</div>